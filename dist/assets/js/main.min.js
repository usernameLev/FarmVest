"use strict";const reviewsSwiper=document.querySelector(".swiper-reviews");if(reviewsSwiper){const a=new Swiper(".swiper-reviews",{autoHeight:!0,loop:!0,pagination:{el:".swiper-pagination",clickable:!0}})}function DynamicAdapt(e){this.type=e}console.log(2),console.log(3),DynamicAdapt.prototype.init=function(){const t=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(let e=0;e<this.nodes.length;e++){var a=this.nodes[e],o=a.dataset.da.trim().split(","),r={};r.element=a,r.parent=a.parentNode,r.destination=document.querySelector(o[0].trim()),r.breakpoint=o[1]?o[1].trim():"767",r.place=o[2]?o[2].trim():"last",r.index=this.indexInParent(r.parent,r.element),this.оbjects.push(r)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,function(e){return"("+this.type+"-width: "+e.breakpoint+"px),"+e.breakpoint},this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,function(e,t,a){return Array.prototype.indexOf.call(a,e)===t});for(let e=0;e<this.mediaQueries.length;e++){var n=this.mediaQueries[e],n=String.prototype.split.call(n,",");const i=window.matchMedia(n[0]),s=n[1],l=Array.prototype.filter.call(this.оbjects,function(e){return e.breakpoint===s});i.addListener(function(){t.mediaHandler(i,l)}),this.mediaHandler(i,l)}},DynamicAdapt.prototype.mediaHandler=function(e,t){if(e.matches)for(let e=0;e<t.length;e++){var a=t[e];a.index=this.indexInParent(a.parent,a.element),this.moveTo(a.place,a.element,a.destination)}else for(let e=t.length-1;0<=e;e--){var o=t[e];o.element.classList.contains(this.daClassname)&&this.moveBack(o.parent,o.element,o.index)}},DynamicAdapt.prototype.moveTo=function(e,t,a){t.classList.add(this.daClassname),"last"===e||e>=a.children.length?a.insertAdjacentElement("beforeend",t):"first"===e?a.insertAdjacentElement("afterbegin",t):a.children[e].insertAdjacentElement("beforebegin",t)},DynamicAdapt.prototype.moveBack=function(e,t,a){t.classList.remove(this.daClassname),void 0!==e.children[a]?e.children[a].insertAdjacentElement("beforebegin",t):e.insertAdjacentElement("beforeend",t)},DynamicAdapt.prototype.indexInParent=function(e,t){e=Array.prototype.slice.call(e.children);return Array.prototype.indexOf.call(e,t)},DynamicAdapt.prototype.arraySort=function(e){"min"===this.type?Array.prototype.sort.call(e,function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:e.place-t.place:e.breakpoint-t.breakpoint}):Array.prototype.sort.call(e,function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:t.place-e.place:t.breakpoint-e.breakpoint})};const da=new DynamicAdapt("max"),iconMenu=(da.init(),document.querySelector(".icon-menu")),menuBody=document.querySelector(".menu__body"),menuLinks=(iconMenu&&iconMenu.addEventListener("click",function(e){document.body.classList.toggle("_lock"),iconMenu.classList.toggle("_active"),menuBody.classList.toggle("_active")}),document.querySelectorAll(".menu__link[data-goto]"));function onMenuLinkClick(e){var t=e.target;t.dataset.goto&&document.querySelector(t.dataset.goto)&&(t=document.querySelector(t.dataset.goto).getBoundingClientRect().top+pageYOffset-document.querySelector("header").offsetHeight,iconMenu.classList.contains("_active")&&(document.body.classList.remove("_lock"),iconMenu.classList.remove("_active"),menuBody.classList.remove("_active")),window.scrollTo({top:t,behavior:"smooth"}),e.preventDefault())}function formFieldsInit(e={viewPass:!1}){var t=document.querySelectorAll("input[placeholder],textarea[placeholder]");t.length&&t.forEach(e=>{e.hasAttribute("data-placeholder-nohide")||(e.dataset.placeholder=e.placeholder)}),document.body.addEventListener("focusin",function(e){e=e.target;"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||(e.dataset.placeholder&&(e.placeholder=""),e.hasAttribute("data-no-focus-classes")||(e.classList.add("_form-focus"),e.parentElement.classList.add("_form-focus")),formValidate.removeError(e))}),document.body.addEventListener("focusout",function(e){e=e.target;"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||(e.dataset.placeholder&&(e.placeholder=e.dataset.placeholder),e.hasAttribute("data-no-focus-classes")||(e.classList.remove("_form-focus"),e.parentElement.classList.remove("_form-focus")),e.hasAttribute("data-validate")&&formValidate.validateInput(e))}),e.viewPass&&document.addEventListener("click",function(e){var t,e=e.target;e.closest('[class*="__viewpass"]')&&(t=e.classList.contains("_viewpass-active")?"password":"text",e.parentElement.querySelector("input").setAttribute("type",t),e.classList.toggle("_viewpass-active"))})}0<menuLinks.length&&menuLinks.forEach(e=>{e.addEventListener("click",onMenuLinkClick)}),formFieldsInit({viewPass:!1});let formValidate={getErrors(e){let t=0;e=e.querySelectorAll("*[data-required]");return e.length&&e.forEach(e=>{null===e.offsetParent&&"SELECT"!==e.tagName||e.disabled||(t+=this.validateInput(e))}),t},validateInput(e){let t=0;return"email"===e.dataset.required?(e.value=e.value.replace(" ",""),this.emailTest(e)?(this.addError(e),t++):this.removeError(e)):("checkbox"!==e.type||e.checked)&&e.value.trim()?this.removeError(e):(this.addError(e),t++),t},addError(e){e.classList.add("_form-error"),e.parentElement.classList.add("_form-error");var t=e.parentElement.querySelector(".form__error");t&&e.parentElement.removeChild(t),e.dataset.error&&e.parentElement.insertAdjacentHTML("beforeend",`<div class="form__error">${e.dataset.error}</div>`)},removeError(e){e.classList.remove("_form-error"),e.parentElement.classList.remove("_form-error"),e.parentElement.querySelector(".form__error")&&e.parentElement.removeChild(e.parentElement.querySelector(".form__error"))},formClean(e){e.reset(),setTimeout(()=>{var t=e.querySelectorAll("input,textarea");for(let e=0;e<t.length;e++){var a=t[e];a.parentElement.classList.remove("_form-focus"),a.classList.remove("_form-focus"),formValidate.removeError(a)}var o=e.querySelectorAll(".checkbox__input");if(0<o.length)for(let e=0;e<o.length;e++)o[e].checked=!1;if(flsModules.select){var r=e.querySelectorAll(".select");if(r.length)for(let e=0;e<r.length;e++){var n=r[e].querySelector("select");flsModules.select.selectBuild(n)}}},0)},emailTest(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}};function formSubmit(e=0){var t=document.forms;if(t.length)for(const a of t)a.addEventListener("submit",function(e){!async function(e,t){var a=e.hasAttribute("data-no-validate")?0:formValidate.getErrors(e);{var o,r;0===a?e.hasAttribute("data-ajax")?(t.preventDefault(),a=e.getAttribute("action")?e.getAttribute("action").trim():"#",o=e.getAttribute("method")?e.getAttribute("method").trim():"GET",r=new FormData(e),e.classList.add("_sending"),(a=await fetch(a,{method:o,body:r})).ok?(o=await a.json(),e.classList.remove("_sending"),n(e)):(alert("Ошибка"),e.classList.remove("_sending"))):e.hasAttribute("data-dev")&&(t.preventDefault(),n(e)):(t.preventDefault(),(r=e.querySelector("._form-error"))&&e.hasAttribute("data-goto-error")&&gotoBlock(r,!0,1e3))}}(e.target,e)}),a.addEventListener("reset",function(e){e=e.target;formValidate.formClean(e)});function n(t){document.dispatchEvent(new CustomEvent("formSent",{detail:{form:t}})),setTimeout(()=>{var e;flsModules.popup&&(e=t.dataset.popupMessage)&&flsModules.popup.open(e)},0),formValidate.formClean(t),FLS("[Формы]: Форма отправлена!")}}function formQuantity(){document.addEventListener("click",function(t){t=t.target;if(t.closest(".quantity__button")){let e=parseInt(t.closest(".quantity").querySelector("input").value);t.classList.contains("quantity__button_plus")?e++:--e<1&&(e=1),t.closest(".quantity").querySelector("input").value=e}})}function formRating(){const a=document.querySelectorAll(".rating");if(0<a.length){let t,r;for(let e=0;e<a.length;e++)!function(e){n(e),i(),e.classList.contains("rating_set")&&function(a){var e=a.querySelectorAll(".rating__item");for(let t=0;t<e.length;t++){const o=e[t];o.addEventListener("mouseenter",function(e){n(a),i(o.value)}),o.addEventListener("mouseleave",function(e){i()}),o.addEventListener("click",function(e){n(a),a.dataset.ajax?async function(e){{var t;e.classList.contains("rating_sending")||(e.classList.add("rating_sending"),(t=await fetch("rating.json",{method:"GET"})).ok?(t=(await t.json()).newRating,r.innerHTML=t,i()):alert("Ошибка"),e.classList.remove("rating_sending"))}}((o.value,a)):(r.innerHTML=t+1,i())})}}(e)}(a[e]);function n(e){t=e.querySelector(".rating__active"),r=e.querySelector(".rating__value")}function i(e=r.innerHTML){e/=.05;t.style.width=e+"%"}}}formSubmit();const block=document.querySelector("body"),img=document.querySelectorAll("[data-prix-mouse]"),circle=document.querySelector(".icons-main-block__circle_1");block.addEventListener("mousemove",function(e){let t=e.clientX/innerWidth,a=e.clientY/innerHeight;img.forEach(e=>{e.setAttribute("style","margin-left:"+2*-t+"%;margin-top:"+2*-a+"%")}),circle.setAttribute("style","margin-right:"+2*t+"%;margin-top:"+2*-a+"%")}),block.addEventListener("mouseout",function(e){img.forEach(e=>{e.setAttribute("style","margin:0")}),circle.setAttribute("style","margin0")});let addWindowScrollEvent=!1;function pageNavigation(){function e(e){if("click"===e.type){var t,a,o=e.target;o.closest("[data-goto]")&&(r=(o=o.closest("[data-goto]")).dataset.goto||"",t=!!o.hasAttribute("data-goto-header"),a=o.dataset.gotoSpeed||500,o=o.dataset.gotoTop?parseInt(o.dataset.gotoTop):0,gotoBlock(r,t,a,o),e.preventDefault())}else if("watcherCallback"===e.type&&e.detail){var r=e.detail.entry,n=r.target;if("navigator"===n.dataset.watch){document.querySelector("[data-goto]._navigator-active");let t;if(n.id&&document.querySelector(`[data-goto="#${n.id}"]`))t=document.querySelector(`[data-goto="#${n.id}"]`);else if(n.classList.length)for(let e=0;e<n.classList.length;e++){var i=n.classList[e];if(document.querySelector(`[data-goto=".${i}"]`)){t=document.querySelector(`[data-goto=".${i}"]`);break}}r.isIntersecting?t&&t.classList.add("_navigator-active"):t&&t.classList.remove("_navigator-active")}}}if(document.addEventListener("click",e),document.addEventListener("watcherCallback",e),getHash()){let e;document.querySelector("#"+getHash())?e="#"+getHash():document.querySelector("."+getHash())&&(e="."+getHash()),e&&gotoBlock(e,!0,500,20)}}function headerScroll(){addWindowScrollEvent=!0;const a=document.querySelector("header.header"),o=a.hasAttribute("data-scroll-show"),r=a.dataset.scrollShow||500,n=a.dataset.scroll||1;let i=0,s;document.addEventListener("windowScroll",function(e){var t=window.scrollY;clearTimeout(s),t>=n?(a.classList.contains("_header-scroll")||a.classList.add("_header-scroll"),o&&(t>i?a.classList.contains("_header-show")&&a.classList.remove("_header-show"):a.classList.contains("_header-show")||a.classList.add("_header-show"),s=setTimeout(()=>{a.classList.contains("_header-show")||a.classList.add("_header-show")},r))):(a.classList.contains("_header-scroll")&&a.classList.remove("_header-scroll"),o&&a.classList.contains("_header-show")&&a.classList.remove("_header-show")),i=t<=0?0:t})}function stickyBlock(){var e;addWindowScrollEvent=!0,(e=document.querySelectorAll("[data-sticky]")).length&&e.forEach(e=>{var t={media:e.dataset.sticky?parseInt(e.dataset.sticky):null,top:e.dataset.stickyTop?parseInt(e.dataset.stickyTop):0,bottom:e.dataset.stickyBottom?parseInt(e.dataset.stickyBottom):0,header:e.hasAttribute("data-sticky-header")?document.querySelector("header.header").offsetHeight:0};{var o=e,r=t;const n=o.querySelector("[data-sticky-item]"),a=r.header,i=a+r.top,s=n.getBoundingClientRect().top+scrollY-i;document.addEventListener("windowScroll",function(e){var t=o.offsetHeight+o.getBoundingClientRect().top+scrollY-(i+n.offsetHeight+r.bottom),a={position:"relative",bottom:"auto",top:"0px",left:"0px",width:"auto"};(!r.media||r.media<window.innerWidth)&&i+r.bottom+n.offsetHeight<window.innerHeight&&(scrollY>=s&&scrollY<=t?(a.position="fixed",a.bottom="auto",a.top=i+"px",a.left=n.getBoundingClientRect().left+"px",a.width=n.offsetWidth+"px"):scrollY>=t&&(a.position="absolute",a.bottom=r.bottom+"px",a.top="auto",a.left="0px",a.width=n.offsetWidth+"px")),n.style.cssText=`position:${a.position};bottom:${a.bottom};top:${a.top};left:${a.left};width:${a.width};`})}})}setTimeout(()=>{if(addWindowScrollEvent){let t=new Event("windowScroll");window.addEventListener("scroll",function(e){document.dispatchEvent(t)})}},0),headerScroll();